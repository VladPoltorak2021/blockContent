<?
require_once($_SERVER["DOCUMENT_ROOT"] . "/local/php_interface/webprofy_field_types/BlockConten/BlockContent.php");



function viewPublicBlockContent($arProperties, $mode = '')
{
    if (!empty($arProperties)) {
        foreach ($arProperties as $propItem) {
            switch ($propItem["type"]) {
                case "text":
                    $propItem["content"] = htmlspecialcharsback($propItem["content"]);
                    ?>
                    <div class="content__block">
                        <?
                        echo $propItem["content"];
                        ?>
                    </div>
                    <?
                    break;
                case "html":
                    print_r($propItem);
                    $propItem["content"] = htmlspecialcharsback($propItem["content"]);
                    ?>
                    <div class="content__block">
                        <?
                        echo $propItem["content"];
                        ?>
                    </div>
                    <?
                    break;
                case 'link':
                    ?>
                    <div class="content__block">
                        <div class="content__block-links">
                            <?if (isset($propItem["content"]["text2"]) && is_array($propItem["content"]["text2"]) && isset($propItem["content"]["header2"]) && is_array($propItem["content"]["header2"])) {
                                foreach ($propItem["content"]["text2"] as $key => $text) {
                                    $header = isset($propItem["content"]["header2"][$key]) ? $propItem["content"]["header2"][$key] : ''; // Проверка существования ключа
                                    ?>
                                    <a class="text-link" href="<?echo $header?>">
                                        <?echo $text?>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4.31806 4.31754L4.84839 4.84787L4.84839 4.84787L4.31806 4.31754ZM4.31806 19.6819L3.78773 20.2123L3.78773 20.2123L4.31806 19.6819ZM19.6825 19.6819L20.2128 20.2123H20.2128L19.6825 19.6819ZM11.1016 3.75C11.5158 3.74925 11.851 3.41286 11.8502 2.99865C11.8495 2.58444 11.5131 2.24926 11.0989 2.25L11.1016 3.75ZM21.75 12.9011C21.7507 12.4869 21.4156 12.1505 21.0014 12.1498C20.5871 12.149 20.2507 12.4842 20.25 12.8984L21.75 12.9011ZM20.5422 3.5L21.0904 2.98817V2.98817L20.5422 3.5ZM10.4708 12.4685C10.1773 12.7607 10.1762 13.2356 10.4685 13.5292C10.7607 13.8227 11.2356 13.8237 11.5291 13.5315L10.4708 12.4685ZM20.0285 3.22706L19.8977 3.96557V3.96557L20.0285 3.22706ZM15.9999 2.25C15.5857 2.25004 15.25 2.58585 15.25 3.00007C15.25 3.41428 15.5859 3.75004 16.0001 3.75L15.9999 2.25ZM20.25 8C20.25 8.41421 20.5858 8.75 21 8.75C21.4142 8.75 21.75 8.41421 21.75 8H20.25ZM20.7729 3.97175L21.5115 3.84109V3.84109L20.7729 3.97175ZM3.75 11.9997C3.75 9.85715 3.75159 8.32566 3.90807 7.16181C4.06165 6.01953 4.35194 5.34432 4.84839 4.84787L3.78773 3.78721C2.96612 4.60881 2.59738 5.65332 2.42145 6.96194C2.24841 8.24898 2.25 9.89956 2.25 11.9997H3.75ZM12.0003 20.25C9.85767 20.25 8.32618 20.2484 7.16233 20.0919C6.02005 19.9384 5.34484 19.6481 4.84839 19.1516L3.78773 20.2123C4.60933 21.0339 5.65384 21.4026 6.96246 21.5786C8.2495 21.7516 9.90008 21.75 12.0003 21.75V20.25ZM2.25 11.9997C2.25 14.0999 2.24841 15.7505 2.42144 17.0375C2.59738 18.3462 2.96612 19.3907 3.78773 20.2123L4.84839 19.1516C4.35194 18.6552 4.06164 17.9799 3.90807 16.8377C3.75159 15.6738 3.75 14.1423 3.75 11.9997H2.25ZM12.0003 21.75C14.1004 21.75 15.751 21.7516 17.0381 21.5786C18.3467 21.4026 19.3912 21.0339 20.2128 20.2123L19.1521 19.1516C18.6557 19.6481 17.9805 19.9384 16.8382 20.0919C15.6743 20.2484 14.1428 20.25 12.0003 20.25V21.75ZM11.0989 2.25C9.28643 2.25327 7.83477 2.27573 6.67869 2.46286C5.5007 2.65353 4.54831 3.02663 3.78773 3.78721L4.84839 4.84787C5.30917 4.38708 5.92304 4.10469 6.91837 3.94359C7.93563 3.77893 9.26437 3.75331 11.1016 3.75L11.0989 2.25ZM20.25 12.8984C20.2467 14.7356 20.2211 16.0644 20.0564 17.0816C19.8953 18.077 19.6129 18.6908 19.1521 19.1516L20.2128 20.2123C20.9734 19.4517 21.3465 18.4993 21.5371 17.3213C21.7243 16.1652 21.7467 14.7136 21.75 12.9011L20.25 12.8984ZM20.013 2.9685L10.4708 12.4685L11.5291 13.5315L21.0713 4.0315L20.013 2.9685ZM20.1593 2.48855C19.4584 2.36443 18.4015 2.30696 17.558 2.27871C17.1282 2.26432 16.7396 2.25715 16.4585 2.25357C16.3178 2.25179 16.2038 2.25089 16.1247 2.25045C16.0851 2.25022 16.0542 2.25011 16.0331 2.25006C16.0225 2.25003 16.0144 2.25001 16.0088 2.25001C16.0061 2.25 16.0039 2.25 16.0024 2.25C16.0017 2.25 16.0011 2.25 16.0007 2.25C16.0005 2.25 16.0003 2.25 16.0002 2.25C16.0001 2.25 16.0001 2.25 16 2.25C16 2.25 15.9999 2.25 16 3C16.0001 3.75 16 3.75 16 3.75C16 3.75 16 3.75 16.0001 3.75C16.0001 3.75 16.0002 3.75 16.0003 3.75C16.0006 3.75 16.001 3.75 16.0016 3.75C16.0027 3.75 16.0045 3.75 16.007 3.75001C16.0119 3.75001 16.0193 3.75002 16.0292 3.75005C16.0489 3.7501 16.0782 3.75021 16.1162 3.75042C16.1922 3.75085 16.3027 3.75171 16.4394 3.75345C16.7131 3.75694 17.091 3.76391 17.5078 3.77787C18.3577 3.80633 19.3151 3.86239 19.8977 3.96557L20.1593 2.48855ZM21 8C21.75 8 21.75 7.99996 21.75 7.99991C21.75 7.99988 21.75 7.99981 21.75 7.99975C21.75 7.99963 21.75 7.99946 21.75 7.99926C21.75 7.99884 21.75 7.99826 21.75 7.99752C21.75 7.99603 21.75 7.99388 21.75 7.99109C21.75 7.98552 21.75 7.97739 21.7499 7.96682C21.7499 7.9457 21.7498 7.91483 21.7495 7.87526C21.7491 7.79614 21.7482 7.68213 21.7464 7.54148C21.7428 7.2604 21.7356 6.87182 21.7212 6.44203C21.6929 5.59857 21.6355 4.54186 21.5115 3.84109L20.0344 4.1024C20.1375 4.68506 20.1936 5.64247 20.222 6.49229C20.236 6.90913 20.243 7.28697 20.2465 7.56066C20.2483 7.69739 20.2491 7.80784 20.2496 7.88384C20.2498 7.92183 20.2499 7.95119 20.2499 7.9709C20.25 7.98075 20.25 7.98819 20.25 7.99308C20.25 7.99553 20.25 7.99734 20.25 7.9985C20.25 7.99908 20.25 7.99949 20.25 7.99974C20.25 7.99987 20.25 7.99995 20.25 8C20.25 8.00002 20.25 8.00002 20.25 8.00003C20.25 8.00002 20.25 8 21 8ZM19.8977 3.96557C19.9506 3.97494 19.9785 3.99525 19.9939 4.01183L21.0904 2.98817C20.8441 2.72441 20.519 2.55227 20.1593 2.48855L19.8977 3.96557ZM19.9939 4.01183C20.0084 4.02726 20.0259 4.0543 20.0344 4.1024L21.5115 3.84109C21.4545 3.51915 21.3107 3.22412 21.0904 2.98817L19.9939 4.01183Z" fill="#003DD9"/>
                                        </svg>

                                    </a>
                                <?}}?>
                        </div>
                    </div>
                    <?php
                    break;
                case "image":
                    $images = array();
                    foreach ($propItem["content"] as $imgId) {
                        $arFile = CFile::GetFileArray($imgId);
                        $images[] = $arFile;
                    }

                    ?>
                    <div class="content__block">
                        <div class="news-detail-slider-box">
                            <div class="swiper news-detail-slider">
                                <div class="swiper-wrapper news-detail-slider__wrapper gallery-hash">
                                    <?
                                    foreach ($propItem["content"] as $imgId) {

                                        $arFile = CFile::GetFileArray($imgId);
                                        ?>
                                        <div class="swiper-slide news-detail-slider__slide gallery-item"
                                             data-src="<? echo $arFile["SRC"] ?>">
                                            <img src="<? echo $arFile["SRC"] ?>" />
                                        </div>
                                        <?
                                    } ?>
                                </div>
                                <div class="counter label-l">
                                    <span class="counter__current">1</span>
                                    /
                                    <span class="counter__slides">8</span>
                                </div>
                            </div>
                            <button class="news-detail-slider__prev slider-btn slider-btn__prev">
                          <span class="slider-btn__icon"><svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.5 6.66699L8.0286 10.1956C8.25082 10.4178 8.36193 10.5289 8.5 10.5289C8.63807 10.5289 8.74918 10.4178 8.9714 10.1956L12.5 6.66699" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</span>
                            </button>
                            <button class="news-detail-slider__next slider-btn slider-btn__next">
                          <span class="slider-btn__icon"><svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.5 6.66699L8.0286 10.1956C8.25082 10.4178 8.36193 10.5289 8.5 10.5289C8.63807 10.5289 8.74918 10.4178 8.9714 10.1956L12.5 6.66699" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</span>
                            </button>
                        </div>
                    </div>
                    <?
                    break;
            }

        }
    }
}

?>